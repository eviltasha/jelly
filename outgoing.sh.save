#!/bin/bash

# test customer's SMTP service

# get date for body file

now=$(date + "%m-%d-%y")

# back up current mail configuration file
mv $HOME/.mailrc .mailrc.bak

# get SMTP settings 
echo "What is the from address?"
read FROM
 	while [ -z "$FROM" ] # Check to make sure there was actually input
		do
			echo "You didn't enter a from address. Please enter one now."
			read FROM
		done
echo "You entered: $FROM"
echo "What is the SMTP server?"
read SERVER
		while [ -z "$SERVER" ] # Check to make sure there was actually input.
			do
				echo "You didn't enter an SMTP server. Please enter one now."
			done
echo "You entered: $SERVER"

# Get password for SMTP authentication

echo "What is the user's password?"
read PASSWORD 
		while [ -z "$PASSWORD" ] # Check to make sure there was actually input.
			do
				echo "You didn't enter a password. Please enter one now."
			done
echo "You entered: $PASSWORD"

# Is it a DASP or WinHost customer?

echo "Pick a subject."
echo "[A] Test from DiscountASP.NET support"
echo "[B] Test from WinHost support"
echo
read SUBJ
		while [ -z "$SUBJ" ] # Check to make sure there was actually input.
			do 
				echo "You didn't choose a subject. Please choose one from the list below:"
				echo "[A] Test from DiscountASP.NET support"
				echo "[B] Test from WinHost support"
				read SUBJ
			done
		until [[ "$SUBJ" == "A" ]] || [[ "$SUBJ" == "a" ]] || [[ "$SUBJ" == "B" ]] || [[ "$SUBJ" == "b" ]]
			do
				echo "You didn't choose a subject. Please choose one from the list below:"
				echo "[A] Test from DiscountASP.NET support"
                                echo "[B] Test from WinHost support"
                                read SUBJ
			done
case "$SUBJ" in
	"A" | "a" ) SUBJECT="Test from DiscountASP.NET support" ;;
	"B" | "b" ) SUBJECT="Test from WinHost support" ;;
esac

echo "You entered: $SUBJECT"

echo "Who should the recipient be? Choose one from the list or type \"D\" to enter your own."
echo "[G] Gmail test account - onlyatest007@gmail.com"
echo "[Y] Yahoo test account - onlyatest007@yahoo.com"
echo
read


# Set body text for body file.

echo "What should the body text be?"
read $BODY
echo "$BODY" >> /home/tasha/email/$FROM

BODYFILE="/home/tasha/email/$FROM" # Set path for body file.
